<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Example - example-ng-submit</title>

<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
<link
	href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css"
	rel="stylesheet" />
	
</head>
<body ng-app="application">
	<script>
		var main = angular.module('application', []);

		main.controller('mainController', function($scope, $http) {
			$scope.loadRandomPosts = function() {
				$http({
					url : "/post/getRandomPosts",
					method : "GET",
					headers : {
						'Content-Type' : 'application/json'
					}
				}).success(function(data, status, headers, config) {
					$scope.postList = data.postList;
					$scope.status = status;

				}).error(function(data, status, headers, config) {
					alert(data.status + '\n' + data.remarks);
				});

			}

			$scope.search = function() {
				$http({
					url : "/post/searchPosts",
					method : "POST",
					headers : {
						'Content-Type' : 'application/json'
					},
					data : {
						keyword : $scope.keyword
					}
				}).success(function(data, status, headers, config) {
					$scope.postList = data.postList;
					$scope.status = status;

				}).error(function(data, status, headers, config) {
					alert(data.status + '\n' + data.remarks);
				});
			}
      
			$scope.like = function(postId) {
				$http({
					url : "/post/likePost",
					method : "POST",
					headers : {
						'Content-Type' : 'application/json'
					},
					data : {
						postId : postId
					}
				}).success(function(data, status, headers, config) {
					alert(data.status + '\n' + data.remarks);
					
				}).error(function(data, status, headers, config) {
					alert(data.status + '\n' + data.remarks);
				});

			}
      
			$scope.loadRandomPosts();

		});
	</script>
	
	<div th:include="components/header :: header"></div>

	<div class="container" ng-controller="mainController">

		<!-- Main hero unit for a primary marketing message or call to action -->
		<div class="hero-unit">
			Search <input type="text" ng-mode="keyword" />
			<button type="button" ng-click="search()">Search</button>
		</div>

		<!-- Example row of columns -->
		<div class="row">
			<div class="span4">
				<ul>
					<li ng-repeat="post in postList">{{post.lastupdatedate}}
						{{post.message}}
						<ul>
							<li ng-repeat="image in post">{{image}}</li>
						</ul>
					</li>
				</ul>
				Main Section , list out the hot post
			</div>
		</div>

		<hr>

		<footer>
			<p>&copy; Company 2013</p>
		</footer>

	</div>
	<!-- /container -->


</body>
</html>