<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Example - example-ng-submit</title>

<script th:include="components/header :: headerLibrary" th:remove="tag"></script>

</head>
<body ng-app="application">
	<script>
		var main = angular.module('application', []);

		main.controller('searchController', function($scope, $http) {

			$scope.search = function() {
				$http({
					url : "/post/searchPosts",
					method : "POST",
					headers : {
						'Content-Type' : 'application/json'
					},
					data : {
						keyword : $scope.keyword
					}
				}).then(function(response) {
					$scope.postList = response.data.postList;
				});
			}

		});

		main.controller('viewPostController', function($scope, $http) {
			$scope.likePost = function(postId) {
				$http({
					url : "/post/likePost",
					method : "POST",
					headers : {
						'Content-Type' : 'application/json'
					},
					data : {
						postId : postId
					}
				}).then(function(response) {
					if (response.data.status == 'success') {
						$scope.message("Like Success");
					} else {
						$scope.message("Like Failed");
					}
				});
			}

			$scope.retweetPost = function(postId) {
				$http({
					url : "/post/retweetPost",
					method : "POST",
					headers : {
						'Content-Type' : 'application/json'
					},
					data : {
						postId : postId
					}
				}).then(function(response) {
					if (response.data.status == 'success') {
						$scope.message("Retweet Success");
					} else {
						$scope.message("Retweet Failed");
					}
				});

			}

			$scope.loadRandomPosts = function() {
				$http({
					url : "/post/getRandomPosts",
					method : "GET",
					headers : {
						'Content-Type' : 'application/json'
					}
				}).then(function(response) {
					$scope.postList = response.data.postList;
				});

			}
			$scope.loadRandomPosts();

		});
	</script>

	<div th:include="components/header :: headerScript" th:remove="tag"></div>
	<div th:include="components/header :: headerBody" th:remove="tag"></div>

	<div class="container">
		<div ng-controller="searchController" class="hero-unit">
			<!-- Main hero unit for a primary marketing message or call to action -->
			Search <input type="text" ng-mode="keyword" />
			<button type="button" ng-click="search()">Search</button>

		</div>

		<div ng-controller="viewPostController" class="row offset1">
			<div th:include="components/post :: viewPosts" th:remove="tag"></div>
		</div>

	</div>
	<hr>

	<footer>
		<p>&copy; Company 2013</p>
	</footer>



</body>
</html>