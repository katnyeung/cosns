<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Example - example-ng-submit</title>


<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>


</head>
<body ng-app="mainApplication">
	<script>
		var upload = angular.module('mainApplication', []);
		upload.directive('fileModel', [ '$parse', function($parse) {
			return {
				restrict : 'A',
				link : function(scope, element, attrs) {
					var model = $parse(attrs.fileModel);
					var modelSetter = model.assign;
					element.bind('change', function() {
						var files = [];
						angular.forEach(element[0].files, function(file) {
							files.push(file);
						});
						scope.$apply(function() {
							modelSetter(scope, files);
						});
					});
				}
			}
		} ]);

		upload.controller('viewPostController', [ '$scope', '$http',
				function($scope, $http) {
					var vm = this;
					vm.create = function() {
						var fd = new FormData();
						angular.forEach(vm.logos, function(val, key) {
							fd.append('file' + key, val);
						});
						$http.post('http://localhost:8080/' + 'uploads', fd, {
							transformRequest : angular.identity,
							headers : {
								'Content-Type' : undefined
							}
						}).success(function(serviceResponse) {
							console.log(serviceResponse);
						});
					}
				} ]);
	</script>
	<div ng-controller="viewPostController">
		<form name="fileform">
			<div class="form-group">
				<label for="fileinput" class="col-sm-3 control-label">Files</label><br>
				<div class="col-sm-12">
					<input type="file" id="fileinput" name="logos"
						file-model="vm.logos" multiple="multiple" class="form-control"
						placeholder="Files" />
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-12">
					<button type="submit" ng-click="vm.create()"
						class="btn btn-default">Create</button>
				</div>
			</div>
		</form>
	</div>
</body>
</html>