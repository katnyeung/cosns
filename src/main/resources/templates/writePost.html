<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Example - example-ng-submit</title>

<!-- https://angular-file-upload.appspot.com/ -->
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
<script src="/js/ng-file-upload.min.js"></script>
</head>
<body>
	<script>
		//inject directives and services.
		var app = angular.module('fileUpload', [ 'ngFileUpload' ]);

		app.controller('MyCtrl', [ '$scope', 'Upload', function($scope, Upload) {
			// upload later on form submit or something similar
			$scope.submit = function() {
				if ($scope.form.file.$valid && $scope.file) {
					$scope.upload($scope.file);
				}
			};
			
		    // for multiple files:
		    $scope.uploadFiles = function (files) {
		      if (files && files.length) {
		          for (var i = 0; i < files.length; i++) {
			        Upload.upload({url : 'post/uploadImage', data: {file: files[i]}})
			        .then(function(resp) {
						console.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);
					}, function(resp) {
						console.log('Error status: ');
					}, function(evt) {
						var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);
						console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);
					});
		          }
		      }
		    }
		} ]);
	</script>
	<div ng-app="fileUpload" ng-controller="MyCtrl">
		<form name="myForm">
			<fieldset>
				<legend>Upload on form submit</legend>
				
				<div ngf-drop="uploadFiles($files)" class="drop-box"
  ngf-drag-over-class="'dragover'" ngf-multiple="true"
  ngf-pattern="'image/*,application/pdf'">Drop Images or PDFs files here</div>
			</fieldset>
	</div>
	</form>
</body>
</html>