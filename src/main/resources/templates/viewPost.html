<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Example - example-ng-submit</title>

<script th:include="components/header :: headerLibrary" th:remove="tag"></script>

<script>
	var main = angular.module('application', []);

	main.controller('viewPostController', function($scope, $http) {
		$scope.likePost = function(postId) {
			$http({
				url : "/post/likePost",
				method : "POST",
				headers : {
					'Content-Type' : 'application/json'
				},
				data : {
					postId : postId
				}
			}).then(function(response) {
				if (response.data.status == 'success') {
					$scope.message("Like Success");
				} else {
					$scope.message("Like Failed");
				}
			});
		}

		$scope.retweetPost = function(postId) {
			$http({
				url : "/post/retweetPost",
				method : "POST",
				headers : {
					'Content-Type' : 'application/json'
				},
				data : {
					postId : postId
				}
			}).then(function(response) {
				if (response.data.status == 'success') {
					$scope.message("Retweet Success");
				} else {
					$scope.message("Retweet Failed");
				}
			});

		}

		$scope.loadPost = function() {
			$http({
				url : "/post/getPost/[[${postId}]]",
				method : "GET",
				headers : {
					'Content-Type' : 'application/json'
				}
			}).then(function(response) {
				$scope.postList = response.data.postList;
			});

		}
		$scope.loadPost();
	});
</script>
</head>
<body ng-app="application">

	<div th:include="components/header :: headerScript" th:remove="tag"></div>
	<div th:include="components/header :: headerBody" th:remove="tag"></div>
	<div class="container">
		<div class="hero-unit">View Post</div>
		<div ng-controller="viewPostController" class="row offset1">
			<div th:include="components/post :: viewPosts" th:remove="tag"></div>
		</div>
	</div>
</body>
</html>